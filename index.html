<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#808080">
    <meta name="description" content="Aplikasi untuk mencatat kehadiran siswa dengan dukungan offline">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Absensi">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23808080' width='192' height='192'/><text x='50%' y='50%' font-size='80' fill='white' text-anchor='middle' dominant-baseline='middle' font-family='Arial,sans-serif' font-weight='bold'>A</text></svg>">
    <link rel="stylesheet" href="style/main.css">
    <link rel="stylesheet" href="style/navbar.css">
    <title>Aplikasi Absensi</title>
</head>
<body>
    <header class="navbar">
        <!-- Navbar Kelas -->
        <nav>
            <div class="kelas">Kelas:</div>
            <div class="dropdown">
                <button class="drop-btn">Kelas</button>
                <div class="dropdown-content">
                    <a href="#" data-file="data/12tkj1.json" data-custom="1">XII-TKJ-1</a>
                    <a href="#" data-file="data/12tkj2.json" data-custom="1">XII-TKJ-2</a>
                    <a href="#" data-file="data/12tkj3.json" data-custom="1">XII-TKJ-3</a>
                    <!-- custom classes akan disisipkan di sini oleh JS -->
                </div>
            </div>

            <!-- tombol untuk menambahkan siswa pada kelas yang sedang aktif -->
            <button id="add-siswa-btn" class="add-btn" title="Tambah Siswa">Tambah Siswa</button>

            <!-- tombol untuk menambahkan kelas -->
            <button id="add-kelas-btn" class="add-kelas-btn" title="Tambah Kelas">Tambah Kelas</button>

            <!-- tombol untuk menghapus kelas (aktif hanya untuk kelas custom) -->
            <button id="delete-kelas-btn" class="delete-kelas-btn" title="Hapus Kelas" disabled>Hapus Kelas</button>

            <!-- tombol untuk mendownload data absensi sebagai spreadsheet (CSV) -->
            <button id="download-csv-btn" class="download-csv-btn" title="Download Absensi">Download Absensi</button>

            <!-- Tombol izin file dihapus; fitur akses file lokal tidak digunakan -->
        </nav>
    </header>
  <h2>Daftar Siswa</h2>
  <div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th>No</th>
        <th>Nama</th>
        <th>Hadir</th>
        <th>Sakit</th>
        <th>Izin</th>
        <th>Alasan</th>
        <!-- NEW: kolom aksi untuk tombol hapus -->
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody id="siswa-tbody">
      <!-- rows akan diisi oleh JS -->
    </tbody>
  </table>
  </div>
  <!-- Ringkasan jumlah hadir/sakit/alpha -->
  <div id="totals" class="totals">
    <div class="totals-item"><strong>Hadir:</strong> <span id="total-hadir">0</span></div>
    <div class="totals-item"><strong>Sakit:</strong> <span id="total-sakit">0</span></div>
    <div class="totals-item"><strong>Alpha:</strong> <span id="total-alpha">0</span></div>
  </div>
    <!-- SheetJS (xlsx) untuk export XLSX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="script/app.js"></script>
    <!-- Register Service Worker untuk PWA support -->
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('Service Worker registered:', reg))
          .catch(err => console.warn('Service Worker registration failed:', err));
      }
    </script>
</body>
</html>
